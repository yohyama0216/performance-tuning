# SQLのクエリの最適化
SQLのクエリの最適化はデータベースドリブンのWebサイトやアプリケーションにおいて、パフォーマンスの改善に非常に重要です。クエリが効率的でない場合、データベースサーバーに不必要な負荷がかかり、結果としてWebサイトのレスポンスタイムが遅くなる可能性があります。

## インデックスの使用
適切なインデックスをテーブルに追加することで、クエリの検索速度を大幅に向上させることができます。

## SELECTステートメントの最適化
- 必要な列のみを選択する。
- JOIN操作を最適化する。
- WHERE句を利用して、必要なレコードのみをフィルタリングする。

## サブクエリよりもJOINを使用
可能な場合、サブクエリよりもJOINを使用することで、パフォーマンスを向上させることができることが多い。
[リンク](./subquery-join.md)
複数のテーブルをJOINする場合、どのテーブルをどの順序でJOINするかがパフォーマンスに大きく影響します。
小さなテーブルから大きなテーブルへのJOIN、またはより多くのフィルター条件を持つテーブルからJOINを始めると、効率が良くなることがあります。

## クエリの再利用
同じクエリを何度も実行する場合、プリペアドステートメントやストアドプロシージャを使用すると、パフォーマンスの向上が期待できます。

## LIMIT句の利用
大量のデータを取得する必要がない場合、LIMIT句を使用して必要なレコード数だけを取得する。

## 統計データの更新
あらかじめ統計的なデータはバッチなどで計算しておく。
データベースの統計データを定期的に更新することで、クエリプランナが最適なクエリプランを選択するのを助けます。

### 正規化の見直し
データベースの正規化は、データの整合性を保つために重要ですが、一部のクエリのパフォーマンスを低下させる可能性もあります。過度な正規化が原因でパフォーマンスが低下している場合、デノーマライゼーションを検討することもあります。
